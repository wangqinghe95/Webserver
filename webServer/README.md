# WebServer v0.1

+ 编译运行：
    cd ./webserver/v0.1
    make && ./bin/webserver

+ 测试：
    + 打开本地浏览器，输入 localhost:8888 ，若网页上出现 helloworld 则说明服务器正确运行
    + 反之则程序运行有问题

+ 项目简介：
    + 整体思路是 epoll + threadpool ；
    + epoll 设置的是 EPOLLONESHOT（只监听一次事件） + 边沿触发模式（新I/O事件触发后才发送通知）；
    + 实现一个任务队列，用条件变量触发通知新任务的到来；
    + 实现一个小根堆的定时器及时剔除超时请求，使用STL优先队列来管理定时器；
    + 解析 HTTP get、post 请求，支持长连接；
    + mime 设计为单例模式；
    + 线程的工作分配：
        - 主线程负责等待 epoll 中的事件，把到来的事件放进任务队列，在每次循环的结束剔除超时请求和被置为删除的时间节点；
        - 工作线程阻塞在条件变量的等待中，新任务到来后，某一工作线程被唤醒，执行具体的 IO 操作和计算任务，如果需要继续监听，则再添加到 epoll 中
    + 线程使用:
        - 第一处是任务队列的添加和取出操作，都需要加锁，并配合条件变量，跨越了多个线程；
        - 第二处是定时器结点的添加和删除，需要加锁，主线程和工作线程都需要添加定时器队列；


